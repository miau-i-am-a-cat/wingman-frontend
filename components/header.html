<!-- Wingman Labs Header Component -->
<header class="header" id="mainHeader">
  <div class="header-container">
    <!-- Mobile Menu Button (left on mobile) -->
    <button class="header-menu-btn" id="menuToggle" aria-label="Open menu">
      <svg class="menu-icon-open" width="20" height="20" viewBox="0 0 14 14" fill="none">
        <path d="M1 3.5H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M1 10.5H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <svg class="menu-icon-close" width="20" height="20" viewBox="0 0 14 14" fill="none">
        <path d="M12 2L2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M12 12L2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </button>

    <!-- Logo -->
    <a href="/" class="header-logo">
      <picture>
        <source media="(max-width: 749px)" srcset="assets/images/logo-mobile.png">
        <img src="assets/images/logo-desktop.png" alt="Wingman Labs" class="logo-img">
      </picture>
    </a>

    <!-- Desktop Navigation -->
    <nav class="header-nav" id="desktopNav">
      <a href="/products/energy.html" class="nav-link">Energy</a>
      <a href="/products/sleep.html" class="nav-link">Sleep</a>
      <a href="/pages/science.html" class="nav-link">Science</a>
      
      <!-- More Dropdown -->
      <div class="nav-dropdown" id="moreDropdown">
        <button class="nav-link nav-dropdown-toggle" aria-expanded="false" aria-haspopup="true">
          More
          <svg width="10" height="10" viewBox="0 0 14 14" fill="none">
            <path d="M11 5.5L7 9.5L3 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <div class="nav-dropdown-menu">
          <a href="/pages/partners.html">Partners</a>
          <a href="/pages/quality.html">Quality</a>
          <a href="/pages/help.html">Help/FAQ</a>
        </div>
      </div>
    </nav>

    <!-- Quick Buy Button -->
    <a href="/pages/quickbuy.html" class="header-quick-buy">QUICK BUY</a>

    <!-- Header Actions -->
    <div class="header-actions">
      <!-- Account -->
      <button class="header-icon-btn" id="accountBtn" aria-label="Account">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="1.5"/>
          <path d="M4 20c0-4 4-6 8-6s8 2 8 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>

      <!-- Cart -->
      <button class="header-icon-btn" id="cartBtn" aria-label="Shopping cart">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
          <path d="M4 4h2l3.6 12h8.8l2.6-8H7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="10" cy="20" r="1.5" fill="currentColor"/>
          <circle cx="18" cy="20" r="1.5" fill="currentColor"/>
        </svg>
        <span class="cart-badge" id="cartBadge">0</span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu Drawer -->
<div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
<nav class="mobile-menu" id="mobileMenu">
  <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close menu">
    <svg width="20" height="20" viewBox="0 0 14 14" fill="none">
      <path d="M12 2L2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M12 12L2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  </button>
  
  <ul class="mobile-menu-list">
    <li><a href="/products/energy.html" class="mobile-menu-link">Energy</a></li>
    <li><a href="/products/sleep.html" class="mobile-menu-link">Sleep</a></li>
    <li><a href="/pages/science.html" class="mobile-menu-link">Science</a></li>
    <li class="mobile-menu-accordion">
      <button class="mobile-menu-link mobile-accordion-toggle" aria-expanded="false">
        More
        <svg class="accordion-icon" width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path class="v-line" d="M7 2.75V11.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M2.75 7H11.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>
      <ul class="mobile-submenu">
        <li><a href="/pages/partners.html">Partners</a></li>
        <li><a href="/pages/quality.html">Quality</a></li>
        <li><a href="/pages/help.html">Help/FAQ</a></li>
      </ul>
    </li>
  </ul>
</nav>

<!-- Cart Drawer -->
<div class="cart-overlay" id="cartOverlay"></div>
<aside class="cart-drawer" id="cartDrawer">
  <div class="cart-drawer-header">
    <button class="cart-drawer-close" id="cartClose" aria-label="Close cart">
      <svg width="20" height="20" viewBox="0 0 14 14" fill="none">
        <path d="M12 2L2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M12 12L2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
  
  <div class="cart-drawer-content" id="cartContent">
    <div class="cart-empty">
      <h3 class="cart-empty-title">Your cart is empty</h3>
      <p>Have an account? <a href="#">Log in</a> to check out faster.</p>
      <a href="/pages/quickbuy.html" class="cart-continue-btn">Continue shopping</a>
    </div>
  </div>
</aside>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Header scroll behavior
  const header = document.getElementById('mainHeader');
  let lastScroll = 0;
  
  function updateHeaderState() {
    const scrollY = window.scrollY;
    if (scrollY > 50) {
      header.classList.add('header--solid');
      header.classList.remove('header--transparent');
    } else {
      header.classList.remove('header--solid');
      header.classList.add('header--transparent');
    }
    lastScroll = scrollY;
  }
  
  // Check if homepage (transparent header initially)
  if (document.body.classList.contains('homepage') || window.location.pathname === '/' || window.location.pathname === '/index.html') {
    header.classList.add('header--transparent');
  } else {
    header.classList.add('header--solid');
  }
  
  window.addEventListener('scroll', updateHeaderState, { passive: true });
  updateHeaderState();

  // Mobile menu
  const menuToggle = document.getElementById('menuToggle');
  const mobileMenu = document.getElementById('mobileMenu');
  const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
  const mobileMenuClose = document.getElementById('mobileMenuClose');

  function openMobileMenu() {
    mobileMenu.classList.add('active');
    mobileMenuOverlay.classList.add('active');
    document.body.style.overflow = 'hidden';
    menuToggle.classList.add('active');
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('active');
    mobileMenuOverlay.classList.remove('active');
    document.body.style.overflow = '';
    menuToggle.classList.remove('active');
  }

  menuToggle.addEventListener('click', function() {
    if (mobileMenu.classList.contains('active')) {
      closeMobileMenu();
    } else {
      openMobileMenu();
    }
  });

  mobileMenuClose.addEventListener('click', closeMobileMenu);
  mobileMenuOverlay.addEventListener('click', closeMobileMenu);

  // Mobile accordion
  const accordionToggles = document.querySelectorAll('.mobile-accordion-toggle');
  accordionToggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      const isExpanded = this.getAttribute('aria-expanded') === 'true';
      this.setAttribute('aria-expanded', !isExpanded);
      this.parentElement.classList.toggle('open');
    });
  });

  // Desktop More dropdown
  const moreDropdown = document.getElementById('moreDropdown');
  const dropdownToggle = moreDropdown.querySelector('.nav-dropdown-toggle');
  
  moreDropdown.addEventListener('mouseenter', function() {
    this.classList.add('active');
    dropdownToggle.setAttribute('aria-expanded', 'true');
  });
  
  moreDropdown.addEventListener('mouseleave', function() {
    this.classList.remove('active');
    dropdownToggle.setAttribute('aria-expanded', 'false');
  });

  // Cart drawer
  const cartBtn = document.getElementById('cartBtn');
  const cartDrawer = document.getElementById('cartDrawer');
  const cartOverlay = document.getElementById('cartOverlay');
  const cartClose = document.getElementById('cartClose');

  function openCart() {
    cartDrawer.classList.add('active');
    cartOverlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeCart() {
    cartDrawer.classList.remove('active');
    cartOverlay.classList.remove('active');
    document.body.style.overflow = '';
  }

  cartBtn.addEventListener('click', openCart);
  cartClose.addEventListener('click', closeCart);
  cartOverlay.addEventListener('click', closeCart);

  // Cart badge visibility
  const cartBadge = document.getElementById('cartBadge');
  const cartCount = parseInt(cartBadge.textContent) || 0;
  if (cartCount > 0) {
    cartBadge.classList.add('visible');
  }
});
</script>
